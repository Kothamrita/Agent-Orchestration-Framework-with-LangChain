<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AI Workflow Automation</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<div class="bg"></div>

<div class="container">

    <h1>âœ¨ AI Workflow Orchestrator</h1>
    <p class="subtitle">
        Research â†’ Summarize â†’ Email â€” Automated.
    </p>

    <form id="taskForm">
        <label>Enter Topic</label>
        <input type="text" name="topic" placeholder="e.g., AI in Healthcare" required>

        <label>Recipient Email</label>
        <input type="email" name="recipient" placeholder="example@infosys.com" required>

        <button type="submit">Run Workflow ğŸš€</button>
    </form>

    <div id="loader" class="loader hidden"></div>

    <div id="results" class="hidden">

        <div class="card">
            <h3>ğŸ“š Research</h3>
            <pre id="researchText"></pre>
        </div>

        <div class="card">
            <h3>ğŸ“ Summary</h3>
            <pre id="summaryText"></pre>
        </div>

        <div class="card">
            <h3>ğŸ“¨ Email Draft</h3>
            <pre id="emailText"></pre>
        </div>

    </div>

</div>


<script>
const form = document.getElementById("taskForm");
const loader = document.getElementById("loader");
const results = document.getElementById("results");

form.addEventListener("submit", async (e) => {
    e.preventDefault();

    loader.classList.remove("hidden");
    results.classList.add("hidden");

    const formData = new FormData(form);

    const response = await fetch("/process", {
        method: "POST",
        body: formData
    });

    const data = await response.json();

    document.getElementById("researchText").innerText = data.research;
    document.getElementById("summaryText").innerText = data.summary;
    document.getElementById("emailText").innerText = data.email;

    loader.classList.add("hidden");
    results.classList.remove("hidden");
});
</script>

</body>
</html>
